<!DOCTYPE html>

<html>

<head>
  <title>WeeNAS Project</title>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="style.css" rel="stylesheet" type="text/css">
</head>

<body>
  <header>
    <h1>WeeNAS</h1>
    <p>Raspberry Pi + Flash Drive + FreeBSD + Samba</p>
  </header>
  <nav>
    <h2>Navigation</h2>
    <ul>
      <li><a href="index.html">About</a></li>
      <li><a href="prerequisites.html">Prerequisites</a></li>
      <li><a href="initial-config.html">Initial configuration</a></li>
      <li>Command-line Administration</li>
      <li><a href="admin-api.html">Administration via API</a></li>
      <li><a href="https://github.com/DavesCodeMusings/WeeNAS/" target="_blank">WeeNAS GitHub Repo</a></li>
    </ul>
  </nav>

  <main>
    <h2>Command-line Administration</h2>
    <p>This section describes how to manage users via command-line tools. If you are familiar with Samba, the commands
      in this section should be easy to pick up. If you have never used Samba before, you may want have a look at the
      <a href="https://www.samba.org/samba/docs/current/man-html/smbpasswd.8.html" target="_blank">smbpasswd manual
        page</a> or skip ahead to <a href="admin-api.html">Administration via API</a>.</p>

    <h3>Logging into the shell.</h3>
    <ol>
      <li>Log in via SSH as a trusted user.</li>
      <li>Switch to the root user with the command 'su -'.</li>
    </ol>

    <h3>Adding Users</h3>
    <ul>
      <li>'smbpasswd -a <i>username</i>' will create a new user in Samba as well as in the underlying FreeBSD operating
        System.</li>
      <li>Enter the initial password when prompted. *</li>
    </ul>
    <p>* Note: the initial password only applies to Samba share access. The O.S. password is a random string and the
      account is locked when created.</p>

    <h3>Locking and Unlocking Users</h3>
    <ul>
      <li>'smbpasswd -d <i>username</i>' is the command to disable (or lock) a user account.</li>
      <li>'smbpasswd -e <i>username</i>' is the command to enable (or unlock) a user account.</li>
    </ul>

    <h3>Deleting Users</h3>
    <ul>
      <li>'smbpasswd -d <i>username</i>' will delete the Samba user, but leave the underlying O.S. user and home
        directory intact.</li>
      <li>'pw userdel <i>username</i> will remove the O.S. user, but leave the home directory intact.</li>
      <li>'rm -Rf /home/<i>username</i> can be used to delete the user's home directory.</li>
    </ul>
    <p>Note: There are no 'are you sure?' prompts for any of these commands, so think twice before pressing enter.</p>

    <h2>Delegating Administration</h2>
    <p>All of the above commands require the user to su to root and therefore have knowledge of the root password. It is
      possible for memebers of the wheel group to perform all of these commands using the WeeNAS API. This is discussed
      in the next section: <a href="admin-api.html">Administration via API</a></p>
  </main>

  <aside>
    <h2>Quick Links</h2>
    <ul>
      <li><a href="https://www.samba.org/samba/docs/current/man-html/smbpasswd.8.html" target="_blank">smbpasswd man
          page</a></li>
    </ul>
  </aside>

  <footer>
    <p>WeeNAS is not associated with, nor is it endorsed by: FreeNAS, the Raspberry Pi Foundation, FreeBSD, or the Samba
      project.</p>
  </footer>
</body>

</html>