<!DOCTYPE html>

<html lang="en-US">

<head>
  <title>WeeNAS Monitor</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="style.css" rel="stylesheet" type="text/css">
  <style>
    details {
      padding-bottom: 1em;
    }
    main details, main summary {
      width: 640px;
    }
    aside details, aside summary {
      width: 320px;
    }
  </style>
  <script src="htmlGauges.js"></script>
  <script>
    /* Open up <details> on larger screens. */
    function openDetails() {
      let mediaQueryList = window.matchMedia('(min-width: 1024px)');
      if (mediaQueryList.matches) {
        let elements = document.getElementsByTagName('details');
        for (let i=1; i<elements.length; i++) {
          elements[i].setAttribute('open', '');
        }
      }
    }
  </script>
</head>

<body onload="openDetails();">
<header>
<h1>weenas.local</h1>
</header>
<nav>
  <ul>
    <li><a href="admin.html">Administrator Login</a></li>
  </ul>
</nav>

<main>
  <h2>System</h2>
  <details id="system-load" open>
    <summary>System Load</summary>
    <canvas id="load-one" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <canvas id="load-five" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <canvas id="load-fifteen" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <canvas id="cpu-use" height=200 width=200></canvas>
    <canvas id="cpu-temp" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <script>
      new AnalogGauge('load-one', '1m', 0.5);
      new AnalogGauge('load-five', '5m', 0.3);
      new AnalogGauge('load-fifteen', '15m', 0.2);
      new AnalogGauge('cpu-use', 'CPU %', 0.1);
      new AnalogGauge('cpu-temp', 'CPU â„ƒ', 0.34);
    </script>
  </details>

  <details id="system-memory" open>
    <summary>Memory</summary>
    <canvas id="active" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <canvas id="inactive" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <canvas id="laundry" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <canvas id="wired" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <canvas id="buffer" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <canvas id="free" height=100 width=100 style="padding-bottom:25px;"></canvas>
    <script>
      new AnalogGauge('active', 'Active', 0.5);
      new AnalogGauge('inactive', 'Inactive', 0.3);
      new AnalogGauge('laundry', 'Laundry', 0.2);
      new AnalogGauge('wired', 'Wired', 0.1);
      new AnalogGauge('buffer', 'Buffer', 0.3);
      new AnalogGauge('free', 'Free', 0.34);
    </script>
  </details>

  <details id="top">
    <summary>Top</summary>
    <pre>

last pid:  3361;  load averages:  0.00,  0.00,  0.00  up 59+07:11:16    19:37:19
30 processes:  1 running, 29 sleeping
CPU:  0.0% user,  0.0% nice,  0.1% system,  0.0% interrupt,  0.0% idle
Mem: 7836K Active, 480M Inact, 2004K Laundry, 204M Wired, 98M Buf, 96M Free
Swap:
    
  PID USERNAME    THR PRI NICE   SIZE    RES STATE    C   TIME    WCPU COMMAND
 3358 dave          1  27    0  5336K  2680K wait     3   0:00   0.98% sh
 3357 dave          1  22    0    12M  7720K select   1   0:00   0.88% sshd
 3355 root          1  38    0    12M  7700K select   2   0:00   0.68% sshd
  904 root          1  22    0   160M   132M select   1  13:43   0.00% smbd
  888 ntpd          1  20    0    11M    11M select   1   9:13   0.00% ntpd
  900 root          1  20    0    27M  6580K select   0   5:05   0.00% nmbd
  974 root          1  20    0  9020K  5344K select   0   4:29   0.00% sendmail
  981 root          1  20    0  4832K  1392K nanslp   0   1:38   0.00% cron
  820 root          1  20    0  4824K  2268K select   0   0:40   0.00% syslogd
 1046 root          1  20    0   160M   131M select   0   0:32   0.00% smbd
 1026 root          2  20    0   121M    91M select   2   0:20   0.00% smbd
99729 root          1  20    0   163M   136M select   0   0:15   0.00% smbd
 1045 root          1  20    0   119M    90M select   1   0:12   0.00% smbd
  977 smmsp         1  20    0  8804K  1376K pause    3   0:09   0.00% sendmail
 1009 root          1  21    0  4940K  2280K select   0   0:08   0.00% inetd
  677 root          1  20    0  3928K   744K select   3   0:06   0.00% devd
  599 root          1  52    0  5056K  2220K select   3   0:01   0.00% dhclient
  961 root          1  20    0    11M  5124K select   3   0:01   0.00% sshd
    </pre>
  </details>
</main>

<aside>
  <h2>Storage</h2>
  <details id="rootfs">
    <summary>rootfs on /</summary>
    <canvas id="rootfs-use" height=200 width=200></canvas>
    <script>
      new AnalogGauge('rootfs-use', '% Full', 0.67);
    </script>
  </details>

  <details id="homefs">
    <summary>homefs on /home</summary>
    <canvas id="homefs-use" height=200 width=200></canvas>
    <script>
      new AnalogGauge('homefs-use', '% Full', 0.34);
    </script>
  </details>

  <details id="backupfs">
    <summary>backupfs on /media/backup</summary>
    <canvas id="backupfs-use" height=200 width=200></canvas>
    <script>
      new AnalogGauge('backupfs-use', '% Full', 0.85);
    </script>
  </details>

  <details id="da0">
    <summary>da0</summary>
    <canvas id="da0-read" height=100 width=100></canvas>
    <canvas id="da0-write" height=100 width=100></canvas>
    <script>
      new AnalogGauge('da0-read', 'Read', 0.1);
      new AnalogGauge('da0-write', 'Write', 0);
    </script>
  </details>

  <details id="da1">
    <summary>da1</summary>
    <canvas id="da1-read" height=100 width=100></canvas>
    <canvas id="da1-write" height=100 width=100></canvas>
    <script>
      new AnalogGauge('da1-read', 'Read', 0);
      new AnalogGauge('da1-write', 'Write', 0.6);
    </script>
  </details>
</aside>

<footer>
  <p><a href="https://davescodemusings.github.io/WeeNAS" target="_blank" style="color: whitesmoke;">WeeNAS Project Home</a></p>
</footer>

</body>

</html>