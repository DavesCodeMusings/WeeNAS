<!DOCTYPE html>

<!-- Mockup of new WeeNAS admin interface. -->

<html lang="en-US">

<head>
  <title>File Shares</title>
  <meta charset="utf-8">
  <link href="common.css" rel="stylesheet" type="text/css">
  <script src="common.js"></script>
  <script>
    function displayServiceHealth(serviceHealth) {
      let tbody = '';
      tbody += `<tr><td>nmbd</td><td>${serviceHealth.nmbd.status}</td></tr>`;
      tbody += `<tr><td>smbd</td><td>${serviceHealth.smbd.status}</td></tr>`;
      tbody += `<tr><td>smb4.conf</td><td>${serviceHealth.smbconf.status}</td></tr>`;
      document.getElementById('smb-service-status').innerHTML = tbody;
    }

    function displaySmbShares(smbConfigShares) {
      let shareList = '<option selected>[New]</option>';
      for (let i = 0; i < smbConfigShares.length; i++) {
        shareList += `<option>${smbConfigShares[i]}</option>`;
      }
      document.getElementById('smb-share-list').innerHTML = shareList;
    }
  </script>
</head>

<body
  onload="AJAX('GET', '/system/health/summary', displayServiceHealth); AJAX('GET', '/smb/config/shares', displaySmbShares);">
  <p class="caution">This is a partially functioning mock-up. Shares cannot be created or deleted.</p>
  <form>
    <fieldset>
      <legend>SMB Service Health</legend>
      <button class="refresh"
        onclick="AJAX('GET', '/system/health/summary', displayServiceHealth);"
        type="button">&#x1F504;</button>
      <table>
        <colgroup>
          <col style="width: 20%">
          <col>
        </colgroup>
        <tbody id="smb-service-status"></tbody>
      </table>
    </fieldset>

    <fieldset>
      <legend>Share Management</legend>
      <button class="refresh"
        onclick="AJAX('GET', '/system/smb/config/shares', displaySmbShares);"
        type="button">&#x1F504;</button>
      <table>
        <colgroup>
          <col style="width: 20%">
          <col>
        </colgroup>
        <thead>
          <tr><th>Share Name</th><th>Properties</th></tr>
        </thead>
        <tbody>
          <tr><td rowspan="5"><select id="smb-share-list" size="5" style="width: 85%;"></select></td></tr>
          <tr><td><input type="text" placeholder="share name"></td></tr>
          <tr><td><input type="text" placeholder="server path"></td></tr>
          <tr><td><input class="optional" type="text" placeholder="comment"></td></tr>
          <tr>
            <td>
              <input type="checkbox">&#x1F50D;<span class="collapsible"> browsable</span>
              <input type="checkbox">&#x270F;&#xFE0F;<span class="collapsible"> writable</span>
              <input type="checkbox">&#x026D4;<span class="collapsible"> unavailable</span>
            </td>
          </tr>
        </tbody>
        <tfoot>
          <tr>
            <td colspan="2">
              <span style="float: right;">
                <button onclick="alert('Pretending to update a share');" type="button">&#x1F4DD; <span class="collapsible">
                Update</span></button>
                <button onclick="alert('Pretending to delete a share');" type="button">&#x0274C; <span class="collapsible">
                Delete</span></button>
              </span>
            </td>
          </tr>
        </tfoot>
      </table>
    </fieldset>

    <!--<fieldset>
      <legend>Share Creation</legend>
      <table>
        <colgroup>
          <col style="width: 20%;">
          <col>
        </colgroup>
        <tr>
          <td>Share Name</td>
          <td><input id="bulk-user-field" placeholder="share name" type="text"></td>
        </tr>
        <tr>
          <td>Server Path</td>
          <td><input type="text" placeholder="server path"></td>
        </tr>
        <tr>
          <td>Comment</td>
          <td><input class="optional" type="text" placeholder="comment"></td>
        </tr>
        <tr>
          <td>Access</td>
          <td>
            <input type="checkbox">&#x1F50D;<span class="collapsible"> browsable</span>
            <input type="checkbox">&#x270F;&#xFE0F;<span class="collapsible"> writable</span>
            <input type="checkbox">&#x026D4;<span class="collapsible"> unavailable</span>
          </td>
        </tr>
      <tr>
          <td colspan="2">
            <button onclick="alert('Add Share');" style="float: right;">&#x02705;<span class="collapsible">
                Create</span></button>
          </td>
        </tr>
      </table>
    </fieldset>-->
  </form>
</body>

</html>